# Vision Auto - 빠른 시작 가이드

## 5분 안에 첫 매크로 만들기

### Step 1: 설치 및 실행

```bash
# 의존성 설치
npm install

# 앱 실행
npm start
```

### Step 2: ADB 확인

```bash
# 터미널에서 ADB가 설치되었는지 확인
adb version

# 디바이스 연결 확인
adb devices
```

**출력 예시:**
```
List of devices attached
RF8M123456    device
```

### Step 3: 앱에서 디바이스 연결

1. Vision Auto 앱 실행
2. **[디바이스 검색]** 클릭
3. 드롭다운에서 디바이스 선택
4. 상태가 "연결됨"으로 변경되는지 확인

### Step 4: 첫 화면 캡처

1. **[새로고침]** 버튼 클릭
2. 안드로이드 화면이 좌측 패널에 표시됨
3. 화면 하단에 해상도 정보 확인 (예: 1080 x 1920)

### Step 5: 이미지 크롭 (핵심!)

1. **[크롭 모드]** 버튼 클릭 (주황색으로 변함)
2. 화면에서 **원하는 버튼/영역을 마우스로 드래그**
   - 예: "확인" 버튼, "로그인" 버튼 등
3. 드래그하는 동안:
   - 파란색 반투명 박스 표시
   - 크기가 실시간으로 표시됨
4. 마우스를 놓으면 프리뷰 모달이 나타남

### Step 6: 액션 설정

프리뷰 모달에서:

1. **매칭 임계값**: 0.80 (기본값, 80% 유사도)
2. **찾으면**: "클릭" 선택
3. **[액션 추가]** 클릭

### Step 7: 매크로 실행

1. 우측 패널에 추가된 액션 확인
2. **[실행]** 버튼 클릭
3. 매크로가 실행되는 것을 확인

---

## 실전 예제: 앱 자동 로그인 매크로

### 시나리오
로그인 화면에서 아이디/비밀번호 입력 후 로그인 버튼 클릭

### 단계별 구현

#### 1. 아이디 입력 필드 찾기
```
1. [크롭 모드] 활성화
2. 아이디 입력창을 드래그로 선택
3. 찾으면: "클릭" 선택
4. [액션 추가]
```

#### 2. 아이디 입력 (수동 추가 필요 - 추후 기능)
현재 버전에서는 이미지 매칭만 지원합니다.
텍스트 입력 기능은 매크로 JSON 파일을 수정하여 추가 가능합니다.

#### 3. 로그인 버튼 클릭
```
1. [크롭 모드] 활성화
2. 로그인 버튼을 드래그로 선택
3. 찾으면: "클릭" 선택
4. [액션 추가]
```

#### 4. 매크로 저장
```
1. [저장] 버튼 클릭
2. 파일명: login_macro.json
```

---

## 고급 팁

### Tip 1: 매칭 임계값 조정

- **0.95~1.0**: 거의 완벽히 일치해야 함 (픽셀 단위까지 정확)
- **0.80~0.90**: 일반적인 사용 (권장)
- **0.60~0.70**: 유사한 이미지도 매칭 (오탐 가능성 있음)

### Tip 2: 크롭 영역 선택 노하우

**좋은 예:**
```
- 버튼 전체 + 주변 여백 일부 포함
- 고유한 디자인/색상이 있는 영역
- 텍스트가 포함된 버튼 (예: "확인", "로그인")
```

**나쁜 예:**
```
- 너무 작은 영역 (10x10 픽셀 이하)
- 화면에 여러 개 있는 일반적인 아이콘
- 배경과 구분이 안 되는 영역
```

### Tip 3: 매크로 JSON 직접 편집

저장된 매크로 파일을 텍스트 에디터로 열어 수정 가능:

```json
[
  {
    "type": "image_match",
    "templatePath": "./templates/template_1234567890.png",
    "threshold": 0.8,
    "action": "tap",
    "timeout": 10000,
    "retry": true
  },
  {
    "type": "wait",
    "duration": 2000
  },
  {
    "type": "tap",
    "x": 540,
    "y": 1000
  }
]
```

**추가 가능한 액션:**

```json
// 대기
{
  "type": "wait",
  "duration": 2000
}

// 직접 탭
{
  "type": "tap",
  "x": 100,
  "y": 200
}

// 스와이프
{
  "type": "swipe",
  "x1": 540,
  "y1": 1000,
  "x2": 540,
  "y2": 300,
  "duration": 300
}

// 텍스트 입력
{
  "type": "input",
  "text": "my_username"
}

// 키 입력 (BACK, HOME 등)
{
  "type": "press_key",
  "keyCode": "KEYCODE_BACK"
}

// 앱 실행
{
  "type": "launch_app",
  "packageName": "com.example.app"
}
```

---

## 자주 묻는 질문 (FAQ)

### Q1: 이미지를 찾지 못합니다
**A:**
- 임계값을 낮춰보세요 (0.80 → 0.70)
- 크롭 영역을 더 크게 선택하세요
- 화면 해상도가 녹화 시와 동일한지 확인하세요

### Q2: 매크로가 너무 느립니다
**A:**
- 이미지 매칭은 CPU 집약적입니다
- 템플릿 이미지 크기를 줄이세요
- `imageMatch.js`의 `stride` 값을 늘리세요 (정확도 ↓, 속도 ↑)

### Q3: 여러 디바이스에서 동시 실행 가능한가요?
**A:**
현재 버전은 단일 디바이스만 지원합니다.
다중 디바이스 지원은 추후 업데이트 예정입니다.

### Q4: 화면이 회전하면 어떻게 되나요?
**A:**
세로/가로 모드가 바뀌면 템플릿 이미지를 다시 캡처해야 합니다.

---

## 다음 단계

- **고급 기능**: 조건문, 루프 추가 (JSON 직접 편집)
- **성능 개선**: OpenCV 설치로 매칭 속도 향상
- **실시간 미러링**: scrcpy 통합 검토

---

**문제가 있나요?**
README.md의 "문제 해결" 섹션을 참고하세요.
