<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data:; img-src 'self' data: blob: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; connect-src 'self' data:">
    <title>ADB 매크로 빌더</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/macro-builder.css">
</head>
<body>
    <div id="app" class="h-screen flex-col bg-slate-50">
        <!-- Header -->
        <header class="header bg-white border-b px-6 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-slate-900">ADB 매크로 빌더</h1>
                    <p class="text-slate-600 text-sm">블록 코딩으로 안드로이드 자동화 매크로 만들기</p>
                </div>
            </div>
        </header>

        <!-- Main Content - 3 Column Layout -->
        <div class="flex-1 flex overflow-hidden">
            <!-- Left Panel - Screen Preview (flex-[5]) -->
            <div class="flex-[5] bg-white border-r flex flex-col">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-slate-900">스크린 프리뷰</h2>
                    <p class="text-sm text-slate-600">화면을 클릭하여 좌표 설정</p>
                </div>
                <div class="flex-1 overflow-auto p-6" id="screen-preview-container">
                    <!-- Screen preview will be rendered here -->
                </div>
            </div>

            <!-- Middle Panel - Macro Sequence (flex-[3]) -->
            <div class="flex-[3] bg-slate-50 flex flex-col" id="macro-sequence-container">
                <!-- Header with Macro Name and Controls -->
                <div class="px-6 py-4 bg-white border-b">
                    <div class="flex items-center justify-between mb-3">
                        <input
                            type="text"
                            id="macro-name-input"
                            class="text-lg max-w-xs border-0 px-0 focus-visible:ring-0 macro-name-input"
                            placeholder="매크로 이름"
                            value="새 매크로"
                        />
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="btn-outline btn-sm" id="btn-import-macro">
                            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            불러오기
                        </button>
                        <input
                            id="import-input-seq"
                            type="file"
                            accept=".json"
                            class="hidden"
                        />
                        <button class="btn-outline btn-sm" id="btn-export-macro">
                            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                            </svg>
                            내보내기
                        </button>
                        <button class="btn-outline btn-sm" id="btn-save-macro">
                            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                            </svg>
                            저장
                        </button>
                        <button class="btn-primary btn-sm ml-auto" id="btn-run-macro">
                            <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            실행
                        </button>
                    </div>
                </div>

                <!-- Action List -->
                <div class="flex-1 overflow-auto p-6" id="action-sequence-list">
                    <!-- Empty state -->
                    <div class="empty-state" id="empty-state">
                        <svg class="empty-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                        <p class="empty-title">매크로가 비어있습니다</p>
                        <p class="empty-description">오른쪽에서 액션을 선택하여 시작하세요</p>
                    </div>
                    <!-- Action blocks will be rendered here -->
                </div>
            </div>

            <!-- Right Panel - Action List (flex-[2]) -->
            <div class="flex-[2] bg-white border-l flex flex-col">
                <div class="px-6 py-4 border-b">
                    <h2 class="text-slate-900">액션 추가</h2>
                    <p class="text-sm text-slate-600">매크로에 추가할 액션 선택</p>
                </div>
                <div class="flex-1 overflow-auto p-6" id="action-list-container">
                    <!-- Tabs -->
                    <div class="tabs mb-4">
                        <div class="tabs-list grid grid-cols-4">
                            <button class="tab active" data-tab="basic">기본</button>
                            <button class="tab" data-tab="system">시스템</button>
                            <button class="tab" data-tab="image">이미지</button>
                            <button class="tab" data-tab="logic">로직</button>
                        </div>
                    </div>

                    <!-- Tab Contents -->
                    <div class="tab-content active" data-tab="basic" id="basic-actions">
                        <!-- Basic actions will be rendered here -->
                    </div>
                    <div class="tab-content hidden" data-tab="system" id="system-actions">
                        <!-- System actions will be rendered here -->
                    </div>
                    <div class="tab-content hidden" data-tab="image" id="image-actions">
                        <!-- Image actions will be rendered here -->
                    </div>
                    <div class="tab-content hidden" data-tab="logic" id="logic-actions">
                        <!-- Logic actions will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Stores -->
    <script src="stores/DeviceStore.js"></script>
    <script src="stores/ScreenStore.js"></script>
    <script src="stores/MacroStore.js"></script>
    <script src="stores/ActionStore.js"></script>

    <!-- Services -->
    <script src="services/EventBus.js"></script>
    <script src="services/IPCService.js"></script>

    <!-- Main App -->
    <script src="macro-builder-app.js"></script>
</body>
</html>
